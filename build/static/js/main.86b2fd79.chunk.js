(this["webpackJsonpnask-recruitment-task"]=this["webpackJsonpnask-recruitment-task"]||[]).push([[0],{256:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),i=r(15),o=r.n(i),c=r(28),l=r(21),s=r(257),u=r(298),d=r(299),b=r(312),p=r(30),j=r(18),h=r(79),m=h.a().typeError("Musi byc liczba").positive("Musi byc wieksza od 0"),f=h.c().required("Waluta jest wymagana"),y=h.b({inCurrencyValue:m,inCurrencyType:f,outCurrencyType:f}),O=r(9),g=r(290),x=Object(g.a)((function(e){var t,r;return{root:(t={backgroundColor:"rgb(255, 255, 255)",border:"1px solid grey",boxShadow:"0px 0px 5px grey",borderRadius:"10px",width:"400px",height:"400px"},Object(O.a)(t,e.breakpoints.up("md"),{width:"500px",height:"500px"}),Object(O.a)(t,"margin",4),Object(O.a)(t,"padding",8),Object(O.a)(t,"zIndex",100),Object(O.a)(t,"display","flex"),Object(O.a)(t,"flexDirection","column"),t),label:Object(O.a)({textAlign:"center",color:e.palette.primary.main,textShadow:"1px 1px grey",fontWeight:"bold",fontSize:"1.4rem",fontFamily:"'Lora', serif"},e.breakpoints.up("sm"),{fontSize:"1.8rem"}),textField:Object(O.a)({margin:1,padding:0,width:"auto","& .MuiAutocomplete-input":{minWidth:"30px !important"},"& .MuiFormLabel-root":{fontStyle:"italic",fontSize:"0.8rem"},"& .MuiInputBase-input":{fontStyle:"italic",fontSize:"0.8rem"}},e.breakpoints.up("sm"),{padding:1,"& .MuiAutocomplete-input":{minWidth:"35px !important"},"& .MuiFormLabel-root":{fontStyle:"italic",fontSize:"1rem"},"& .MuiInputBase-input":{fontStyle:"italic",fontSize:"1rem"}}),form:(r={height:"100%",display:"flex",justifyContent:"center",flexDirection:"column","& > *":{marginBottom:10,marginTop:10,marginLeft:5,marginRight:5}},Object(O.a)(r,e.breakpoints.up("sm"),{"& > *":{marginBottom:15,marginTop:15,marginLeft:20,marginRight:20}}),Object(O.a)(r,"& > .currencyTypeSelectors",{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-around"}),r),buttonWrapper:{margin:e.spacing(1),position:"relative",width:"min-content",alignSelf:"center"},buttonWrapperButton:{width:"100%",color:e.palette.common.white,backgroundColor:e.palette.primary.main},buttonWrapperProgress:{color:e.palette.primary.dark,position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}}})),v=r(137),C=r(308),S=r(296),w=r(309),k=r(5);function T(e){var t=e.classes,r=e.name,n=e.adormentFieldName,a=e.control,i=e.placeholder,o=e.disabled,l=void 0!==o&&o;Object(p.f)({control:a,name:n});return Object(k.jsx)(p.a,{name:r,control:a,rules:{required:!l},render:function(e){var r,o,s,u,d=e.field,b=e.fieldState;return Object(k.jsx)(C.a,Object(c.a)(Object(c.a)(Object(c.a)({placeholder:i,className:t.textField,fullWidth:!0,InputProps:{readOnly:l,endAdornment:Object(k.jsx)(S.a,{position:"end",children:null!==(r=null===(o=a.fieldsRef.current[n])||void 0===o?void 0:o._f.value)&&void 0!==r?r:""})}},d),b.isTouched),{},{helperText:null!==(s=null===(u=b.error)||void 0===u?void 0:u.message)&&void 0!==s?s:" "}))}})}function M(e){var t=e.classes,r=e.name,a=e.control,i=e.data,o=e.placeholder,l=Object(n.useMemo)((function(){return Object.values(i)}),[i]);return Object(k.jsx)(p.a,{name:r,control:a,render:function(e){var n,a,s=e.field,u=e.fieldState;return Object(k.jsx)(w.a,{id:r,debug:!0,disablePortal:!0,fullWidth:!1,autoComplete:!0,autoSelect:!0,options:l,className:t.textField,value:null!==(n=i[s.value])&&void 0!==n?n:null,onChange:function(e,t){var r;s.onChange(null!==(r=null===t||void 0===t?void 0:t.id)&&void 0!==r?r:"")},inputValue:null!==(a=s.value)&&void 0!==a?a:"",onInputChange:function(e,t){s.onChange(t)},getOptionLabel:function(e){return e.id},renderInput:function(e){var t,r;return Object(k.jsx)(C.a,Object(c.a)(Object(c.a)({},e),{},{size:"small",label:o,variant:"outlined",helperText:null!==(t=null===(r=u.error)||void 0===r?void 0:r.message)&&void 0!==t?t:" "}))}})}})}var N=r(133),D=r.n(N),z=r(310);function W(e){var t=e.historyStateManager,r=(Object(j.g)(),x());return Object(k.jsxs)("div",{className:r.root,children:[Object(k.jsx)(s.a,{className:r.label,children:"Konwerter walut"}),Object(k.jsx)(F,{historyStateManager:t,classes:r})]})}function F(e){var t,r=e.historyStateManager,a=e.classes,i=Object(n.useState)(!1),o=Object(l.a)(i,2),s=o[0],h=o[1],m=Object(j.f)(),f=function(e,t){"clickaway"!==t&&h(!1)},O=Object(p.e)({defaultValues:{inCurrencyValue:"",outCurrencyValue:"",inCurrencyType:"",outCurrencyType:""},resolver:Object(v.a)(y),mode:"onBlur"}),g=O.control,x=O.handleSubmit,C=O.formState,S=(C.errors,C.isSubmitting),w=O.setValue,N=function(){var e=Object(n.useState)({}),t=Object(l.a)(e,2),r=t[0],a=t[1];return Object(n.useEffect)((function(){fetch("https://free.currconv.com/api/v7/currencies?apiKey="+I).then((function(e){return e.json()})).then((function(e){return a(e.results)})).catch((function(){return a({})}))}),[]),r}();Object(n.useEffect)((function(){}),[null===(t=g.fieldsRef.current.inCurrencyType)||void 0===t?void 0:t._f.value]);return Object(k.jsxs)("form",{onSubmit:x((function(e){return""!==e.inCurrencyValue&&(t=e.inCurrencyType,n=e.outCurrencyType,fetch("https://free.currconv.com/api/v7/convert?apiKey="+I+"&q="+t+"_"+n+"&compact=y").then((function(e){return e.json()})).then((function(e){return e[t+"_"+n].val})).catch((function(){}))).then((function(t){var n=e.inCurrencyValue*t;w("outCurrencyValue",n,{shouldDirty:!0}),r.push(Object(c.a)(Object(c.a)({},e),{},{outCurrencyValue:n})),m.push("/history")})).catch((function(e){h(!0)}));var t,n})),className:a.form,children:[Object(k.jsx)(T,{classes:a,control:g,name:"inCurrencyValue",adormentFieldName:"inCurrencyType",placeholder:"Wpisz kwote"}),Object(k.jsx)(T,{classes:a,control:g,name:"outCurrencyValue",disabled:!0,adormentFieldName:"outCurrencyType",placeholder:"Konwertuj do"}),Object(k.jsxs)("div",{className:"currencyTypeSelectors",children:[Object(k.jsx)(M,{classes:a,control:g,data:N,placeholder:"z",name:"inCurrencyType"}),Object(k.jsx)("div",{onClick:function(){var e,t,r=null===(e=g.fieldsRef.current.inCurrencyType)||void 0===e?void 0:e._f.value,n=null===(t=g.fieldsRef.current.outCurrencyType)||void 0===t?void 0:t._f.value;w("inCurrencyType",n,{shouldDirty:!0}),w("outCurrencyType",r,{shouldDirty:!0})},children:Object(k.jsx)(D.a,{})}),Object(k.jsx)(M,{classes:a,control:g,data:N,placeholder:"do",name:"outCurrencyType"})]}),Object(k.jsxs)("div",{className:a.buttonWrapper,children:[Object(k.jsx)(u.a,{type:"submit",variant:"contained",className:a.buttonWrapperButton,children:"Konwertuj"}),S&&Object(k.jsx)(d.a,{size:24,className:a.buttonWrapperProgress})]}),Object(k.jsx)(b.a,{open:s,autoHideDuration:6e3,onClose:f,children:Object(k.jsx)(z.a,{onClose:f,severity:"error",children:"Nie uda\u0142o wykona\u0107 si\u0119 \u017cadanej operacji"})})]})}var I="315d28fc0699e3be74db";var V=r(300),H=r(295),P=r(301),L=r(302),B=r(303),R=r(304),A=r(305),E=Object(g.a)((function(e){var t,r;return{root:(t={backgroundColor:e.palette.primary.main,border:"1px solid grey",boxShadow:"0px 0px 5px grey",borderRadius:"10px",width:function(e){return e.isOpen?"400px":"70px"},height:"400px"},Object(O.a)(t,e.breakpoints.up("md"),{width:function(e){return e.isOpen?"500px":"70px"},height:"500px"}),Object(O.a)(t,"margin",4),Object(O.a)(t,"padding",8),Object(O.a)(t,"paddingLeft",30),Object(O.a)(t,"transform","translateX(-30px)"),Object(O.a)(t,e.breakpoints.down("sm"),{transform:"translateY(-30px)",paddingTop:"30px"}),Object(O.a)(t,"display","flex"),Object(O.a)(t,"flexDirection","row"),t),label:Object(O.a)({textOrientation:"sideways",writingMode:"vertical-rl",fontSize:"1.4rem",fontFamily:"'Lora', serif"},e.breakpoints.up("sm"),{fontSize:"1.8rem"}),labelSmaller:(r={fontSize:"0.8rem",fontFamily:"'Lora', serif"},Object(O.a)(r,e.breakpoints.up("sm"),{fontSize:"1rem"}),Object(O.a)(r,"textDecoration","und"),r),labelSmallerWrapper:{width:"100%",textAlign:"center",textDecoration:"underline",color:e.palette.common.white,"&:hover":{cursor:"pointer"},"& .MuiSvgIcon-root":{margin:"auto",display:"block"}},labelWrapper:{color:e.palette.common.white,width:"min-content","&:hover":{cursor:"pointer"},"& .MuiSvgIcon-root":{margin:"auto",display:"block"}},labelContainer:{display:"flex",flexDirection:"column"},historyContainer:{backgroundColor:"rgba(0, 0, 0, 0)",width:"100%",height:"100%",overflowY:"auto",display:"flex",flexDirection:"column",justifyContent:"space-between",margin:1,padding:1,"& .MuiPaper-root":{backgroundColor:"rgba(0, 0, 0, 0)"}},table:{border:"1px solid white",backgroundColor:"rgba(0, 0, 0, 0)","& .MuiTableCell-body,.MuiTableCell-head":{color:e.palette.common.white}}}})),K=r(135),_=r.n(K),J=r(134),q=r.n(J);function Y(e){var t=e.historyStateManager,r=e.isHistoryPageShowed,a={isOpen:r},i=E(a),o=Object(j.f)();return Object(n.useEffect)((function(){}),[t.get()]),Object(k.jsxs)("div",{className:i.root,children:[a.isOpen&&Object(k.jsx)(X,{classes:i,data:t.get(),clearCallback:function(){return t.clear()}}),Object(k.jsx)(Z,{classes:i,isOpened:r,toggleHistoryPageCallback:function(){return r?o.push("/"):o.push("/history")}})]})}function X(e){var t=e.classes,r=e.data,n=e.clearCallback;return Object(k.jsxs)("div",{className:t.historyContainer,children:[Object(k.jsx)(V.a,{component:H.a,children:Object(k.jsxs)(P.a,{className:t.table,"aria-label":"simple table",children:[Object(k.jsx)(L.a,{children:Object(k.jsxs)(B.a,{children:[Object(k.jsx)(R.a,{style:{width:"50%"},children:"Data Konwersji"}),Object(k.jsx)(R.a,{style:{width:"20%"},align:"center",children:"Przed"}),Object(k.jsx)(R.a,{style:{width:"10%"},align:"center"}),Object(k.jsx)(R.a,{style:{width:"20%"},align:"center",children:"Po"})]})}),Object(k.jsx)(A.a,{children:r.map((function(e){return Object(k.jsxs)(B.a,{children:[Object(k.jsx)(R.a,{style:{width:"50%"},scope:"row",children:e.dateOfConversion.toISOString().replace("T"," ").replace(/.\d\d\dZ/,"")}),Object(k.jsx)(R.a,{style:{width:"20%"},align:"center",children:e.inCurrencyValue.toFixed(2)+" "+e.inCurrencyType}),Object(k.jsx)(R.a,{style:{width:"5%"},align:"center",children:Object(k.jsx)(q.a,{})}),Object(k.jsx)(R.a,{style:{width:"20%"},align:"center",children:e.outCurrencyValue.toFixed(2)+" "+e.outCurrencyType})]},e.dateOfConversion.toString()+e.inCurrencyValue.toString()+e.inCurrencyType.toString())}))})]})}),Object(k.jsx)("div",{className:t.labelSmallerWrapper,onClick:n,children:Object(k.jsx)(s.a,{className:t.labelSmaller,children:"Wyczysc Historie"})})]})}function Z(e){var t=e.classes,r=e.isOpened,n=e.toggleHistoryPageCallback;return Object(k.jsx)("div",{className:t.labelContainer,children:Object(k.jsxs)("div",{className:t.labelWrapper,onClick:n,children:[r?Object(k.jsx)(_.a,{}):null,Object(k.jsx)(s.a,{className:t.label,children:"Historia"})]})})}var G=r(14);var Q=Object(g.a)((function(e){var t;return{root:(t={margin:"auto",height:"inherit",display:"flex",flexDirection:"row"},Object(O.a)(t,e.breakpoints.down("sm"),{flexDirection:"column"}),Object(O.a)(t,"minHeight","inherit"),Object(O.a)(t,"justifyContent","center"),Object(O.a)(t,"alignItems","center"),t)}}));var U=function(){var e=function(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),r=t[0],a=t[1];return Object(n.useEffect)((function(){var e=localStorage.getItem("currencyConversionHistoryData");if(e){var t=JSON.parse(e,(function(e,t){return"dateOfConversion"===e?new Date(t):t}));a(t)}}),[]),{get:Object(n.useCallback)((function(){return r}),[r]),push:Object(n.useCallback)((function(e){var t=[Object(c.a)(Object(c.a)({},e),{},{dateOfConversion:new Date})].concat(Object(G.a)(r));a(t),localStorage.setItem("currencyConversionHistoryData",JSON.stringify(t))}),[r]),clear:Object(n.useCallback)((function(){a([]),localStorage.removeItem("currencyConversionHistoryData")}),[])}}(),t=Q();return Object(k.jsx)("div",{className:t.root,children:Object(k.jsxs)(j.c,{children:[Object(k.jsxs)(j.a,{path:"/history/",children:[Object(k.jsx)(W,{historyStateManager:e}),Object(k.jsx)(Y,{isHistoryPageShowed:!0,historyStateManager:e})]}),Object(k.jsxs)(j.a,{path:"/",children:[Object(k.jsx)(W,{historyStateManager:e}),Object(k.jsx)(Y,{isHistoryPageShowed:!1,historyStateManager:e})]})]})})},$=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,313)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,i=t.getLCP,o=t.getTTFB;r(e),n(e),a(e),i(e),o(e)}))},ee=r(306),te=r(307),re=r(136),ne=Object(re.a)({palette:{primary:{main:"#2196f3"}},overrides:{MuiCssBaseline:{"@global":{html:{WebkitFontSmoothing:"auto"},body:{margin:0,minHeight:"100vh",background:"linear-gradient(45deg, #2196f3 10%,#ffffff 60%)","& div#root":{minHeight:"inherit"}},a:{textDecoration:"none",color:"black"},".MuiAutocomplete-option":{fontSize:"1rem"}}}}}),ae=r(45);o.a.render(Object(k.jsx)(a.a.StrictMode,{children:Object(k.jsxs)(ee.a,{theme:ne,children:[Object(k.jsx)(te.a,{}),Object(k.jsx)(ae.a,{children:Object(k.jsx)(U,{})})]})}),document.getElementById("root")),$()}},[[256,1,2]]]);
//# sourceMappingURL=main.86b2fd79.chunk.js.map