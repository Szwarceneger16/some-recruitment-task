(this["webpackJsonpsome-recruitment-task"]=this["webpackJsonpsome-recruitment-task"]||[]).push([[0],{296:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(55),i=n.n(c),o=n(360),u=n(369),l=n(117),s=n(24),d=n(368),j=n(365),b=n(157),p=n(26),O=n(366),h=n(364),y=n(359),m=n(13),f=n(166),g=n(161),x=n.n(g),v=n(28),C=n(3),w=n(370),k=n(377),T=n(351),S=Object(T.a)(w.a)((function(e){var t,n=e.theme;return t={textAlign:"center",color:n.palette.primary.main,textShadow:"1px 1px grey",fontWeight:"bold",fontSize:"1.4rem"},Object(C.a)(t,n.breakpoints.up("sm"),{fontSize:"2.5rem"}),Object(C.a)(t,"padding","40px 0"),t})),H=Object(T.a)(w.a)((function(e){var t,n=e.theme;return t={textAlign:"center",color:n.palette.primary.dark,fontWeight:"normal",fontSize:"0.8rem"},Object(C.a)(t,n.breakpoints.up("sm"),{fontSize:"1.5rem"}),Object(C.a)(t,"padding","40px 0"),t})),F=Object(T.a)("div")((function(e){var t,n=e.theme;return t={backgroundColor:"rgb(255, 255, 255)",border:"1px solid grey",boxShadow:"0px 0px 5px grey",borderRadius:"10px",width:"400px",height:"400px"},Object(C.a)(t,n.breakpoints.up("md"),{width:"500px",height:"500px"}),Object(C.a)(t,"margin",4),Object(C.a)(t,"padding",8),Object(C.a)(t,"zIndex",100),Object(C.a)(t,"display","flex"),Object(C.a)(t,"flexDirection","column"),t})),D=Object(T.a)(k.a)((function(e){var t=e.theme;return{width:"100%",color:t.palette.common.white,backgroundColor:t.palette.primary.main}})),V=Object(T.a)("div")((function(e){var t=e.theme;return{margin:"".concat(t.spacing(1)," auto ").concat(t.spacing(3)," auto"),position:"relative",width:"min-content",alignSelf:"center"}})),z=Object(T.a)("div")((function(){return{display:"grid",gridTemplateColumns:"repeat(3, 1fr);",textAlign:"center",alignItems:"center"}})),I=n(362),E=n(379),B=n(98),M=n(2),P=["name","adormentFieldName"];function W(e){var t=e.name,n=e.adormentFieldName,r=Object(B.a)(e,P),a=Object(v.g)({name:n});return Object(M.jsx)(v.a,{name:t,rules:{required:r.disabled},render:function(e){var t,n,c=e.field,i=e.fieldState;return Object(M.jsx)(I.a,Object(p.a)(Object(p.a)(Object(p.a)({},r),{},{InputProps:{readOnly:r.disabled,endAdornment:Object(M.jsx)(E.a,{position:"end",children:a})}},c),{},{helperText:null!==(t=null===(n=i.error)||void 0===n?void 0:n.message)&&void 0!==t?t:" "}))}})}var N=n(361),A=["name","data","placeholder"];function L(e){var t=e.name,n=e.data,a=e.placeholder,c=Object(B.a)(e,A),i=Object(r.useMemo)((function(){return n&&Object.values(n)}),[n]);return Object(M.jsx)(v.a,{name:t,render:function(e){var t,r,o=e.field,u=e.fieldState;return Object(M.jsx)(N.a,Object(p.a)(Object(p.a)({},c),{},{options:i,value:null!==(t=n[o.value])&&void 0!==t?t:null,onChange:function(e,t){var n;o.onChange(null!==(n=null===t||void 0===t?void 0:t.id)&&void 0!==n?n:"")},inputValue:null!==(r=o.value)&&void 0!==r?r:"",onInputChange:function(e,t){o.onChange(t)},getOptionLabel:function(e){return e.id},renderInput:function(e){var t,n;return Object(M.jsx)(I.a,Object(p.a)(Object(p.a)({},e),{},{size:"small",label:a,variant:"outlined",helperText:null!==(t=null===(n=u.error)||void 0===n?void 0:n.message)&&void 0!==t?t:" "}))}}))}})}var R=Object(r.createContext)({get:function(){return[]},push:function(e){},clear:function(){return null}}),J=Object(T.a)("div")((function(e){var t,n=e.theme;return t={margin:"auto",height:"inherit",display:"flex",flexDirection:"row"},Object(C.a)(t,n.breakpoints.down("sm"),{flexDirection:"column"}),Object(C.a)(t,"minHeight","inherit"),Object(C.a)(t,"justifyContent","center"),Object(C.a)(t,"alignItems","center"),t})),K=Object(T.a)("div")((function(e){var t,n=e.theme;return t={height:"100%",display:"flex",justifyContent:"center",flexDirection:"column","& > *":{marginBottom:10,marginTop:10,marginLeft:5,marginRight:5}},Object(C.a)(t,n.breakpoints.up("sm"),{"& > *":{marginBottom:15,marginTop:15,marginLeft:20,marginRight:20}}),Object(C.a)(t,"& > .currencyTypeSelectors",{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-around"}),t}));function q(e){var t=e.name,n=e.placeholder,r=e.adormentFieldName,a=e.disabled,c=void 0!==a&&a,i=Object(v.g)({name:t}),o=Object(v.g)({name:r});return Object(M.jsx)(I.a,{placeholder:n,fullWidth:!0,name:t,value:i,InputProps:{readOnly:c,endAdornment:Object(M.jsx)(E.a,{position:"end",children:o})}})}var U=n(19),Y=n.n(U),Z=n(35);function _(){return(_=Object(Z.a)(Y.a.mark((function e(t){var n,r,a;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.inCurrencyType,r=t.outCurrencyType,e.next=3,fetch("https://free.currconv.com/api/v7/convert?apiKey=315d28fc0699e3be74db&q="+n+"_"+r+"&compact=y");case 3:return e.next=5,e.sent.json();case 5:return a=e.sent,e.abrupt("return",a["".concat(n,"_").concat(r)].val);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var G=n(367),X=function(e){return Object(G.a)("/getCurrencyTypes",(function(){return function(){return Q.apply(this,arguments)}()}),e)};function Q(){return(Q=Object(Z.a)(Y.a.mark((function e(){var t;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://free.currconv.com/api/v7/currencies?apiKey=315d28fc0699e3be74db");case 2:return e.next=4,e.sent.json();case 4:return t=e.sent,e.abrupt("return",t.results);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $=n(100),ee=$.a().typeError("Musi byc liczba").min(0,"Musi byc wieksza od 0"),te=$.c().required("Waluta jest wymagana"),ne=$.b({inCurrencyValue:ee,outCurrencyValue:ee,inCurrencyType:te,outCurrencyType:te}),re={clearHistoryButton:"Wyczysc Historie",toggleHistoryView:{show:"Poka\u017c histori\u0119",hide:"Ukryj histori\u0119"},table:{sourceCurrencyHeading:"Przed",targetCurrencyHeading:"Po",dateHeading:"Data Konwersji"}},ae={mainHeading:"Nast\u0105pi\u0142 nieoczekwiany b\u0142\u0105d",subHeading:"Za\u0142aduj ponownie stron\u0119"},ce={mainHeading:"Konwerter walut",convertButton:"KONWERTUJ",currencyTypesLoadingError:"Nie mo\u017cna za\u0142adowac danych",conversionError:"Nie uda\u0142o wykona\u0107 si\u0119 \u017cadanej operacji"},ie=function(){var e=Object(r.useState)(!1),t=Object(m.a)(e,2),n=t[0],a=t[1],c=X(),i=c.data,o=c.status,l=Object(r.useContext)(R),s=function(e,t){"clickaway"!==t&&a(!1)};return Object(M.jsxs)(F,{children:[Object(M.jsx)(S,{children:ce.mainHeading}),Object(M.jsxs)(K,{children:["loading"===o&&Object(M.jsx)(y.a,{alignItems:"center",justifyContent:"center",children:Object(M.jsx)(u.a,{})}),"error"===o&&Object(M.jsx)(H,{children:ce.currencyTypesLoadingError}),"success"===o&&i&&Object(M.jsx)(oe,{currencyTypes:i,errorCallback:function(){a(!0)},submitCallback:function(e){return l.push(e)}})]}),Object(M.jsx)(O.a,{open:n,autoHideDuration:6e3,onClose:s,children:Object(M.jsx)(h.a,{onClose:s,severity:"error",children:ce.conversionError})})]})},oe=function(e){var t=e.currencyTypes,n=void 0===t?{}:t,r=e.errorCallback,a=e.submitCallback,c=e.disabled,i=Object(v.f)({defaultValues:{inCurrencyValue:0,outCurrencyValue:0,inCurrencyType:"",outCurrencyType:""},resolver:Object(f.a)(ne),mode:"onBlur"}),o=i.handleSubmit,u=i.formState.isSubmitting,l=i.setValue,s=i.getValues;return Object(M.jsx)(v.b,Object(p.a)(Object(p.a)({},i),{},{children:Object(M.jsxs)("form",{onSubmit:o((function(e){if(!e.inCurrencyValue)return!1;(function(e){return _.apply(this,arguments)})({inCurrencyType:e.inCurrencyType,outCurrencyType:e.outCurrencyType}).then((function(t){var n=e.inCurrencyValue*t;l("outCurrencyValue",n,{shouldDirty:!1}),a&&a(Object(p.a)(Object(p.a)({},e),{},{outCurrencyValue:n}))})).catch((function(){return r&&r()}))})),children:[Object(M.jsx)(W,{name:"inCurrencyValue",adormentFieldName:"inCurrencyType",placeholder:"Wpisz kwote",fullWidth:!0,disabled:c}),Object(M.jsxs)(z,{children:[Object(M.jsx)(L,{autoComplete:!0,autoSelect:!0,data:n,placeholder:"z",name:"inCurrencyType",disabled:c}),Object(M.jsx)("div",{onClick:function(){var e=s("inCurrencyType"),t=s("outCurrencyType");l("inCurrencyType",t,{shouldDirty:!0}),l("outCurrencyType",e,{shouldDirty:!0})},children:Object(M.jsx)(x.a,{})}),Object(M.jsx)(L,{autoComplete:!0,autoSelect:!0,data:n,placeholder:"do",name:"outCurrencyType",disabled:c})]}),Object(M.jsx)(V,{children:Object(M.jsx)(D,{type:"submit",variant:"contained",loading:u,children:ce.convertButton})}),Object(M.jsx)(q,{name:"outCurrencyValue",disabled:!0,adormentFieldName:"outCurrencyType",placeholder:"Wynik"})]})}))},ue=n(371),le=n(372),se=n(376),de=n(373),je=n(374),be=n(375),pe=n(164),Oe=n.n(pe),he=n(163),ye=n.n(he),me=n(380),fe=n(378),ge=n(5),xe=Object(ge.a)("div",{shouldForwardProp:function(e){return"vertical"!==e}})((function(e){var t=e.vertical,n=void 0!==t&&t;return Object(p.a)({display:"flex",flexDirection:"row"},n?{alignItems:"center",height:"100%"}:{justifyContent:"space-evenly"})})),ve=Object(ge.a)(fe.a,{shouldForwardProp:function(e){return"vertical"!==e}})((function(e){var t=e.theme,n=e.vertical,r=void 0!==n&&n;return Object(p.a)({minWidth:"30px",lineHeight:1,"& .MuiButton-startIcon":{margin:t.spacing(.1)}},r?{textOrientation:"sideways",writingMode:"vertical-rl",padding:"".concat(t.spacing(1)," ").concat(t.spacing(.5)),margin:0}:Object(C.a)({margin:t.spacing(.5)},t.breakpoints.down("sm"),{fontSize:"1rem"}))})),Ce=Object(ge.a)("div")((function(){return{width:"100%",flexGrow:1,overflowY:"auto",display:"flex",flexDirection:"column",justifyContent:"space-between",margin:1,padding:1,"& .MuiPaper-root":{backgroundColor:"rgba(0, 0, 0, 0)"}}})),we=Object(ge.a)(me.a)((function(e){var t=e.theme;return{border:"1px solid white","& .MuiTableCell-body,.MuiTableCell-head":{color:t.palette.common.white},scrollbarColor:"".concat(t.palette.common.white," ").concat(t.palette.common.black)}})),ke=Object(ge.a)("div",{shouldForwardProp:function(e){return"isOpen"!==e}})((function(e){var t,n=e.theme,r=e.isOpen,a=void 0!==r&&r;return t={backgroundColor:n.palette.primary.main,border:"1px solid grey",boxShadow:"0px 0px 5px grey",borderRadius:"10px",height:"400px",width:a?"400px":"70px"},Object(C.a)(t,n.breakpoints.up("md"),{width:a?"500px":"70px",height:"500px"}),Object(C.a)(t,"margin",4),Object(C.a)(t,"padding",8),Object(C.a)(t,"paddingLeft",30),Object(C.a)(t,"transform","translateX(-30px)"),Object(C.a)(t,n.breakpoints.down("sm"),{transform:"translateY(-30px)",paddingTop:"30px"}),Object(C.a)(t,"display","flex"),Object(C.a)(t,"flexDirection","column"),t})),Te=re,Se=function(e){var t=e.isOpen,n=Object(s.f)(),a=Object(r.useContext)(R),c=function(){return t?n.push("/"):n.push("/history")},i=null===a||void 0===a?void 0:a.get();return Object(M.jsx)(ke,{isOpen:t,children:t?Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(He,{data:i}),Object(M.jsxs)(xe,{children:[Object(M.jsx)(ve,{variant:"outlined",color:"secondary",onClick:function(){return a.clear()},children:Te.clearHistoryButton}),Object(M.jsx)(Fe,{isOpened:!0,toggleHistoryPageCallback:function(){return c()}})]})]}):Object(M.jsx)(xe,{vertical:!0,children:Object(M.jsx)(Fe,{isOpened:!1,toggleHistoryPageCallback:function(){return c()}})})})};function He(e){var t=e.data;return Object(M.jsx)(Ce,{children:Object(M.jsx)(le.a,{component:ue.a,children:Object(M.jsxs)(we,{"aria-label":"simple table",children:[Object(M.jsx)(de.a,{children:Object(M.jsxs)(je.a,{children:[Object(M.jsx)(be.a,{style:{width:"50%"},children:Te.table.dateHeading}),Object(M.jsx)(be.a,{style:{width:"20%"},align:"center",children:Te.table.sourceCurrencyHeading}),Object(M.jsx)(be.a,{style:{width:"10%"},align:"center"}),Object(M.jsx)(be.a,{style:{width:"20%"},align:"center",children:Te.table.targetCurrencyHeading})]})}),Object(M.jsx)(se.a,{children:t.map((function(e){return Object(M.jsxs)(je.a,{children:[Object(M.jsx)(be.a,{style:{width:"50%"},scope:"row",children:e.dateOfConversion.toISOString().replace("T"," ").replace(/.\d\d\dZ/,"")}),Object(M.jsx)(be.a,{style:{width:"20%"},align:"center",children:e.inCurrencyValue.toFixed(2)+" "+e.inCurrencyType}),Object(M.jsx)(be.a,{style:{width:"5%"},align:"center",children:Object(M.jsx)(ye.a,{})}),Object(M.jsx)(be.a,{style:{width:"20%"},align:"center",children:e.outCurrencyValue.toFixed(2)+" "+e.outCurrencyType})]},e.dateOfConversion.toString()+e.inCurrencyValue.toString()+e.inCurrencyType.toString())}))})]})})})}function Fe(e){var t=e.isOpened,n=e.toggleHistoryPageCallback;return Object(M.jsx)(xe,{children:Object(M.jsx)(ve,{vertical:!t,color:"secondary",variant:"outlined",size:"small",startIcon:t?Object(M.jsx)(Oe.a,{}):void 0,onClick:n,children:t?Te.toggleHistoryView.hide:Te.toggleHistoryView.show})})}var De=n(15),Ve=function(e){var t=e.children,n=Object(r.useState)([]),a=Object(m.a)(n,2),c=a[0],i=a[1];Object(r.useEffect)((function(){var e=localStorage.getItem("currencyConversionHistoryData");if(e){var t=JSON.parse(e,(function(e,t){return"dateOfConversion"===e?new Date(t):t}));i(t)}}),[]);var o=Object(r.useCallback)((function(){return c}),[c]),u=Object(r.useCallback)((function(e){var t=[Object(p.a)(Object(p.a)({},e),{},{dateOfConversion:new Date})].concat(Object(De.a)(c));i(t),localStorage.setItem("currencyConversionHistoryData",JSON.stringify(t))}),[c]),l=Object(r.useCallback)((function(){i([]),localStorage.removeItem("currencyConversionHistoryData")}),[]);return Object(M.jsx)(R.Provider,{value:{get:o,push:u,clear:l},children:t})},ze=n(165),Ie=Object(ze.a)({palette:{primary:{main:"#1C5CC5",contrastText:"#FFFFFF",dark:"#454860",light:"#3578EB"},secondary:{main:"#FFFFFF",contrastText:"#1C5CC5",dark:"#C2CBD9",light:"#3578EB"}},typography:{fontFamily:"Lora, serif",fontWeightMedium:"bold",fontWeightRegular:"bold"},components:{MuiCssBaseline:{styleOverrides:{body:{margin:0,minHeight:"100vh",background:"linear-gradient(60deg, #1C5CC5 46%,#ffffff 54%)","& div#root":{minHeight:"inherit"}},a:{textDecoration:"none",color:"black"},".MuiAutocomplete-option":{fontSize:"1rem"}}}}});var Ee=function(){var e=Object(r.useRef)();return e.current||(e.current=new j.a({defaultOptions:{queries:{refetchOnWindowFocus:!1,refetchOnMount:!1,retry:2,staleTime:12e4}}})),Object(M.jsx)(b.a,{client:e.current,children:Object(M.jsx)(Ve,{loader:Object(M.jsx)(u.a,{}),children:Object(M.jsxs)(d.a,{theme:Ie,children:[Object(M.jsx)(o.a,{}),Object(M.jsx)(J,{children:Object(M.jsx)(l.a,{children:Object(M.jsxs)(s.c,{children:[Object(M.jsxs)(s.a,{path:"/history",children:[Object(M.jsx)(ie,{}),Object(M.jsx)(Se,{isOpen:!0})]}),Object(M.jsxs)(s.a,{path:"/",children:[Object(M.jsx)(ie,{}),Object(M.jsx)(Se,{isOpen:!1})]})]})})})]})})})},Be=n(16),Me=n(17),Pe=n(32),We=n(33),Ne=ae,Ae=function(){return Object(M.jsxs)(F,{children:[Object(M.jsx)(S,{children:Ne.mainHeading}),Object(M.jsx)(w.a,{textAlign:"center",children:Ne.subHeading})]})},Le=function(e){Object(Pe.a)(n,e);var t=Object(We.a)(n);function n(e){var r;return Object(Be.a)(this,n),(r=t.call(this,e)).state={hasError:!1},r}return Object(Me.a)(n,[{key:"render",value:function(){return this.state.hasError?Object(M.jsx)(Ae,{}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(){return{hasError:!0}}}]),n}(r.Component);i.a.render(Object(M.jsx)(a.a.StrictMode,{children:Object(M.jsx)(Le,{children:Object(M.jsx)(Ee,{})})}),document.getElementById("root"))}},[[296,1,2]]]);
//# sourceMappingURL=main.50ac381f.chunk.js.map